<!DOCTYPE html><html lang="ZH-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="referrer" content="no-referrer"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="author" content="椎咲良田"><meta name="copyright" content="椎咲良田"><meta name="og:image" content="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/avatar.jpg"><meta name="og:type" content="website"><meta name="og:site_name" content="椎咲良田"><meta name="og:url" content="sanshiliuxiao.top"><meta name="og：title" content="椎咲良田"><meta name="theme-color" content="#b854d4"><title>椎咲良田</title><link rel="canonical" href="//sanshiliuxiao.top"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/favicon.jpg" type="image/x-icon"><link rel="stylesheet" href="/css/index.css?version=2.0.0"><link rel="stylesheet" href="/font/fontello.css?version=2.0.0"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira+Mono|Noto+Serif+SC&amp;amp;display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/lib/gitalk/gitalk.min.css"><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/lib/gitalk/gitalk.min.js"></script></head><body><div class="layout"><header><div class="header"><div class="mobile-bg" style="background-image:url(https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/mobile.png);"></div><h1 class="title">椎咲良田</h1><h2 class="subtitle">快走吧 趁风停止之前</h2><nav class="menu"><a class="menu-item pjax-main-link" href="/"><li><i class="icon-index"></i><span>首页</span></li></a><a class="menu-item pjax-main-link" href="/archives/"><li><i class="icon-archives"></i><span>归档</span></li></a><a class="menu-item pjax-main-link" href="/categories/"><li><i class="icon-categories"></i><span>分类</span></li></a><a class="menu-item pjax-main-link" href="/tags/"><li><i class="icon-tags"></i><span>标签</span></li></a><a class="menu-item pjax-main-link" href="/books/"><li><i class="icon-books"></i><span>书单</span></li></a><a class="menu-item pjax-main-link" href="/inspirations/"><li><i class="icon-inspiration"></i><span>灵感</span></li></a><a class="menu-item pjax-main-link" href="/friends/"><li><i class="icon-friends"></i><span>友链</span></li></a><a class="menu-item pjax-main-link" href="/about/"><li><i class="icon-about"></i><span>关于</span></li></a></nav></div></header><main><div class="main-wrapper"></div><div class="pjax-main-page"><div class="post"><article class="post-article"><div class="post-header"><img class="default-image" src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/postDefaultImage .png"><div class="post-head"><div class="post-title-wrapper"><h1 class="post-title">hexo之页面改版</h1></div><div class="post-meta"><span class="post-date"><i class="icon-calendar"></i><span class="date timeago" datetime="2018-09-30T07:20:52.000Z"></span></span><span class="post-hot"><i class="icon-fire"></i><span class="leancloud_visitors" id="/notebook/hexo/20180929-hexo之页面改版/" data-flag-title="hexo之页面改版">热度<span class="leancloud-visitors-count">0</span>℃</span></span><span class="post-tags"><i class="icon-tag"></i><span class="tag">hexo</span></span><span class="post-categories"><i class="icon-bookmark-empty"></i><span class="category">笔记本</span><span class="category">hexo</span></span></div></div></div><div class="post-content"><div class="markdown"><h2 id="想法"><a href="#想法" class="headerlink" title="想法"></a>想法</h2><p>最近，有这样一种想法，把一些以前的笔记，做一个归总，由一个页面做入口，通过该页面跳转到详细的页面之上，方便存档，最好又不影响，当前的博文顺序。</p>
<p>之前关于博客的管理方法，很简单，无标签，只分类。通过定义分类的入口，对不同种类的页面，进行区分管理。</p>
<p>在<code>themes/next/_config.yml</code>文件中设置入口。</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/1.png" alt></p>
<p>页面上的效果是这样的，再具体的分类，就可以点击分类标签，进行查看。</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/2.png" alt></p>
<p>现在的要求是，有一些笔记，不希望出现在主页中，最好也不会出现在分类里面，只使用一个主页面，进行管理。</p>
<p>不出现在分类中，很好办，就是不写分类。那另一个功能要怎么实现呢？ 借助万能的搜索引擎，找到了一篇博文。<a href="http://itfriends.xyz/2018/06/12/Hexo-%E8%AE%BE%E7%BD%AE%E9%A6%96%E9%A1%B5%E9%9A%90%E8%97%8F%E6%8C%87%E5%AE%9A%E6%96%87%E7%AB%A0/#more" target="_blank" rel="noopener">博文地址</a></p>
<p>方法很简单，借助一个自定义<code>front-matter</code>参数，通过判断这个参数的布尔值，确定是否在主页对其进行展示。为了方便，在<code>scaffolds/post.md</code>文件中设置好，以后就不必要每次手动填写。<code>notshow</code>为<code>false</code>时，展示出来，为<code>true</code>时，不展示。（当然，如果文章头，没有<code>notshow</code>参数，测试后得知，相当于<code>notshow: false</code>，保证了以前的博文，可以不添加该参数）</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/3.png" alt></p>
<p>在<code>themes/next/layout/index.swig</code>的文件中有这样一段代码。</p>
<pre><code class="html">&lt;section id=&quot;posts&quot; class=&quot;posts-expand&quot;&gt;
  {% for post in page.posts %}
    {{ post_template.render(post, true) }}
  {% endfor %}
&lt;/section&gt;</code></pre>
<p>修改主题（使用主题为next）的博客主页渲染逻辑。增加判断</p>
<pre><code class="html">&lt;section id=&quot;posts&quot; class=&quot;posts-expand&quot;&gt;
  {% for post in page.posts %}
    {% if post.notshow != true %}
      {{ post_template.render(post, true) }}
    {% endif %}
  {% endfor %}
&lt;/section&gt;</code></pre>
<p>好了，基本的要求，已经实现了。</p>
<p>新的问题是，既然不会出现主页，也将其从分类中隐藏，那我怎么能找到某篇文章<strong>对应的URL</strong>呢。观察hexo渲染后的页面，发现博文的URL，有这样两种形式。</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/4.png" alt></p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/5.png" alt></p>
<p>首先是域名，其次是日期，再者是分类，最后是文件名（一般和文章名一致，也就说可以不同咯）。</p>
<p>另外一种情况却是，首先是域名，其次是日期，最后是文件名。</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/6.png" alt></p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/7.png" alt></p>
<p>为什么会出现这样的情况，即使我写了分类，可见问题并不是分类，搜索一番，找到对应的关键词，由这个决定了URL，当然还搜到了优化URL之类的。</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/8.png" alt></p>
<p>但好像想偏了，直到后来，在多次试验后，并且突然看到了文件夹的组织方式，终于明白为什么了。 原因是因为在<code>_post</code>目录下，为了方便管理，自己独自创建了对应的文件夹。也正是因为这个原因，才导致URL，出现诸如<code>日期/notebook/文件名</code>的情况。</p>
<p><img src="/notebook/hexo/20180929-hexo之页面改版/9.png" alt></p>
<p>最终问题，也解决了。</p>
<p>于是我想到了一个最简单的方法。就是修改<code>permalink</code>的值（比如这样<code>permalink: :title/</code>）以及建立一个新文件夹，存放笔记，最后通过相对路径，对其进行跳转。对其进行测试后，得知此方案可行。之后的事情，就是开始整理笔记文件啦。</p>
<h2 id="意外"><a href="#意外" class="headerlink" title="意外"></a>意外</h2><p>仔细观察后发现，虽然达到了首页隐藏的效果，但是会导致分页出现问题，其根本原因在于，它只是不被渲染，但依旧属于一篇文章，换句话说，就是分页是根据具体的文章数目决定，然后才是决定是否被渲染在首页上。那如何去解决呢？？？</p>
<p>最暴力的方法，就是关闭分页，这样就不会觉得分页后，每一页显示的数目不对劲。</p>
<p>其次就是去更改，底层的代码，不过好像不是很容易办到。</p>
<p>嗯，应该还有其他方法。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><p>最后决定不展示默认的首页，而是把首页展示的内容指向<code>archives</code>，或者说表现成为<code>archives</code>页面的那种形式。博客首页样式，被彻底的改变了。方法很简单</p>
<p>将<code>themes/next/layout/index.swig</code>里面的代码全部清除，然后把<code>themes/next/layout/archive.swig</code>里面的代码全部复制进来。</p>
<p>因为不需要展示默认的首页，所以<code>notshow</code>参数也不必要了，所以说绕了一大圈，反而使用这样一种较为方便的方法去解决，真的有意思。</p>
<h2 id="题外"><a href="#题外" class="headerlink" title="题外"></a>题外</h2><p>由于再URL的问题上看了几篇博文，发现文件名和文章标题名可以不一致。那么通过文件名设置成(日期-文章名)，可以对本地文件，进行良好的管理。然后文件内容<code>title</code>参数值，去除日期，保留文章名。</p>
<div style="text-align : center"><!-- 歌曲名 --><p> </p><!--嵌入的音乐iframe --></div></div></div><div class="post-art-warpper"><div class="post-art"><script src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><ins class="adsbygoogle" style="display:block;text-align:center;" data-ad-client="ca-pub-9441161448418285" data-ad-layout="in-article" data-ad-format="fluid" data-ad-slot="6860833347"></ins><script>setTimeout(() => {
  try{
    (adsbygoogle = window.adsbygoogle || []).push({})
  } catch {
    let dom = document.querySelector('.post-art-warpper');
    dom.classList.add('hide-art')
  }
}, 3000)</script></div></div></article></div><div id="gitalk"></div><script>var gitalk = new Gitalk({
    clientID: '921d6f0be7c36e212658',
    clientSecret: '2614ce5f405d03d99d9b76da0dc0a6f75b376bd9',
    id: '2018-09-30 15:20:52',
    repo: 'comments',
    owner: 'sanshiliuxiao',
    admin: 'sanshiliuxiao'
})
gitalk.render('gitalk')</script></div><div class="pjax-main-loading loading"><img class="loading-image" src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/loading.gif"></div></main><footer><div class="footer site-info"><p><i class="icon-copyright"></i><span>2018</span>&minus;<span>2020</span>&nbsp;&nbsp;&nbsp;<i class="icon-heart"></i>&nbsp;&nbsp;<span>椎咲良田</span></p><p><a href="https://github.com/sanshiliuxiao/hexo-theme-aurora.git" target="_blank">hexo-theme-Aurora</a>&nbsp; | &nbsp;快走吧 趁风停止之前</p></div></footer></div><div class="bg"><div class="pc-dynamic-bg"><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/1.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/2.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/3.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/4.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/5.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/6.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/7.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/8.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/9.jpg"></span></div></div><span class="back-to-top"></span><div class="leancloud"><script src="/js/third-party/leancloud.min.js?version=2.0.0"></script><div class="leancloud-app-id" leancloud-app-id="QAIKomD08e9fmVRQP4tkzUDf-MdYXbMMI"></div><div class="leancloud-app-key" leancloud-app-key="vi0TViY0HvYocUR3HxKGd1l9"></div><div class="leancloud-app-hot"></div><div class="leancloud-app-visitor"></div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/lib/APlayer/APlayer.min.css"><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/lib/APlayer/APlayer.min.js"></script><div id="aplayer"></div><script>let list = JSON.parse('[{"name":"Once more","artist":"阿保剛","url":"https://files.catbox.moe/13boxb.mp3","cover":"https://i.loli.net/2019/04/18/5cb87157c617e.jpg"},{"name":"All or None","artist":"阿保剛","url":"https://files.catbox.moe/4x69y9.mp3","cover":"https://i.loli.net/2019/04/18/5cb87157b537a.jpg"},{"name":"Karma","artist":"阿保剛","url":"https://files.catbox.moe/r5dsuh.mp3","cover":"https://i.loli.net/2019/04/18/5cb871583cfb7.jpg"},{"name":"星の奏でる歌","artist":"阿保剛","url":"https://files.catbox.moe/m1wd57.mp3","cover":"https://i.loli.net/2019/04/18/5cb871585123b.jpg"}]')
  const ap = new APlayer({
      container: document.getElementById('aplayer'),
      theme: '#b28fce',
      audio: list,
      fixed: true
  });
  ap.list.show()
</script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/isMobile.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/timeago.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/pjax.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/zooming.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/backstretch.min.js"></script><script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/highlight.min.js"></script><script src="/js/index.js?version=2.0.0"></script></body></html>