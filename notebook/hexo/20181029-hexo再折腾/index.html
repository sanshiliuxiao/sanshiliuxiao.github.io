<!DOCTYPE html><html lang="ZH-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="referrer" content="no-referrer"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no,viewport-fit=cover"><meta name="author" content="椎咲良田"><meta name="copyright" content="椎咲良田"><meta name="og:image" content="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/avatar.jpg"><meta name="og:type" content="website"><meta name="og:site_name" content="椎咲良田"><meta name="og:url" content="sanshiliuxiao.top"><meta name="og：title" content="椎咲良田"><meta name="theme-color" content="#b854d4"><title>椎咲良田</title><link rel="canonical" href="//sanshiliuxiao.top"><link rel="dns-prefetch" href="//cdn.jsdelivr.net"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/favicon.jpg" type="image/x-icon"><link rel="stylesheet" href="/css/index.css?version=2.0.0"><link rel="stylesheet" href="/font/fontello.css?version=2.0.0"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Fira+Mono|Noto+Serif+SC&amp;amp;display=swap"><link rel="stylesheet" href="/lib/disqus/disqus.min.css"><script src="/lib/disqus/disqus.min.js"></script><link rel="stylesheet" href="/lib/gitalk/gitalk.min.css"><script src="/lib/gitalk/gitalk.min.js"></script></head><body><div class="layout"><header><div class="header"><div class="mobile-bg" style="background-image:url(https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/mobile.png);"></div><h1 class="title">椎咲良田</h1><h2 class="subtitle">快走吧 趁风停止之前</h2><nav class="menu"><a class="menu-item pjax-main-link" href="/"><li><i class="icon-index"></i><span>首页</span></li></a><a class="menu-item pjax-main-link" href="/archives/"><li><i class="icon-archives"></i><span>归档</span></li></a><a class="menu-item pjax-main-link" href="/categories/"><li><i class="icon-categories"></i><span>分类</span></li></a><a class="menu-item pjax-main-link" href="/tags/"><li><i class="icon-tags"></i><span>标签</span></li></a><a class="menu-item pjax-main-link" href="/books/"><li><i class="icon-books"></i><span>书单</span></li></a><a class="menu-item pjax-main-link" href="/inspirations/"><li><i class="icon-inspiration"></i><span>灵感</span></li></a><a class="menu-item pjax-main-link" href="/friends/"><li><i class="icon-friends"></i><span>友链</span></li></a><a class="menu-item pjax-main-link" href="/about/"><li><i class="icon-about"></i><span>关于</span></li></a></nav></div></header><main><div class="main-wrapper"></div><div class="pjax-main-page"><div class="post"><article class="post-article"><div class="post-header"><img class="default-image" src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/postDefaultImage .png"><div class="post-head"><div class="post-title-wrapper"><h1 class="post-title">hexo博客再折腾</h1></div><div class="post-meta"><span class="post-date"><i class="icon-calendar"></i><span class="date timeago" datetime="2018-10-29T15:26:45.000Z"></span></span><span class="post-hot"><i class="icon-fire"></i><span class="leancloud_visitors" id="/notebook/hexo/20181029-hexo再折腾/" data-flag-title="hexo博客再折腾">热度<span class="leancloud-visitors-count">0</span>℃</span></span><span class="post-tags"><i class="icon-tag"></i><span class="tag">hexo</span></span><span class="post-categories"><i class="icon-bookmark-empty"></i><span class="category">笔记本</span><span class="category">hexo</span></span></div></div></div><div class="post-content"><div class="markdown"><div style="text-align : center"><!-- 歌曲名 --><p> </p><!--嵌入的音乐iframe --></div>

<p>在访问其他人的博客的时候，发现这样一个好玩的效果，鼠标点击，周围泛起一圈气泡。于是，想到了能不能在自己的博客中也添加一下。最后，效果实现了，不过没有自动动手写出来，而是直接引入了其他人写好的文件。不过这样一个发现的过程，还是挺有意思的。</p>
<p><strong>PS: 这博客可真漂亮呀!!!</strong></p>
<h2 id="发现"><a href="#发现" class="headerlink" title="发现"></a>发现</h2><p>访问<code>https://chanshiyu.com/</code>发现这样的效果，觉得挺有趣的。</p>
<p><img src="1.gif" alt></p>
<p>打开控制台，点击<code>network</code>，重新刷新页面，把目标锁定到了一个名为<code>anime.min.js</code>的文件，很明显，即使它不是要找的文件，也应该与这个效果有关。</p>
<p><img src="2.png" alt></p>
<p>使用google搜索<code>anime.js</code>，访问其主页，发现也是这样一个冒泡的动画效果，看来没找错地方。</p>
<p>打开控制台，分别在<code>Element</code> 和 <code>network</code>进行定位。看来<code>fireworks.js</code>就是要寻找的文件了，它依赖于<code>anime.js</code>。</p>
<p><img src="3.png" alt></p>
<h2 id="嵌入hexo中"><a href="#嵌入hexo中" class="headerlink" title="嵌入hexo中"></a>嵌入hexo中</h2><p>想法，只需要在对应的位置，进行js文件的引用，就可以达到目标。</p>
<p>google搜索 hexo引入自定义js </p>
<p>第一条结果，大致意思，就是在<code>/themes/&lt;theme_name&gt;/source</code>下有 <code>js css</code>等静态文件的存放文件夹。</p>
<p>第二条结果，大致意思，就是可以在<code>themes/&lt;theme_name&gt;/source/layout</code>下进行全局静态文件的引用。</p>
<p>虽然会有主题上的差异，但情况差不多。当前自己使用的主题是<code>next</code>， 打开<code>themes/next/source/_layout.swig</code> 。浏览文件，有这样一段代码，它应该标志着在<code>_themes/next/source/_scripts</code>中引用js文件。</p>
<p><img src="4.png" alt> </p>
<p>打开<code>_themes/&lt;theme_name&gt;/source/_scripts/commons.swig</code> ，猜测大概意思，就是从<code>/themes/&lt;theme_name&gt;/source/js/src/</code>中引入对应的文件。</p>
<p><img src="5.png" alt></p>
<p><strong>所以为了统一管理，最好的办法就是依葫芦画瓢，分别在对应的位置进行设置。</strong> 因为<code>_layout.swig</code>被其他页面引用，所以在这里设置，就相当于同时在其他页面中引入。</p>
<p>步骤</p>
<ol>
<li>在<code>/themes/next/layout/_layout.swig</code> 中，手动注入。</li>
</ol>
<p>   <img src="6.png" alt></p>
<ol start="2">
<li><p>在<code>/themes/next/layout/_scripts/</code>中，手动添加文件。</p>
<p><img src="7.png" alt></p>
</li>
<li><p>在<code>D:\blog\themes\next\source\js\src</code>中，手动添加文件。</p>
<p><img src="8.png" alt></p>
</li>
<li><p>对应的文件代码</p>
<pre><code>// anime.min.js
把之前找到的文件复制下来即可。
// anime_oneAnime.js
就是 fireworks.js 中的内容
不过手动生成了canvas节点，并设置对应的属性</code></pre><pre><code class="javascript">// yiyan.js
// 接入一言api，
;(function() {
    var pathName = window.location.pathname
     // 正则匹配， 如果成功就发送请求。
     var path = [&#39;/&#39;, &#39;/categories/.*&#39;]
     var re = path.map((item) =&gt; RegExp(item))
    if (re.some(item =&gt; item.test(pathName))) {
        var xhr = new XMLHttpRequest();
        xhr.open(&#39;get&#39;,  &#39;https://v1.hitokoto.cn/?c=a&#39; );
        xhr.timeout = 2000; // 超时时间，单位是毫秒
        xhr.onreadystatechange = function () {
            if (xhr.readyState === 4) {
                success(JSON.parse(xhr.responseText))
            }
        }
        xhr.ontimeout = function (e) {error()};
        xhr.onerror = function(e) {error()}
        xhr.send();
    }
    function success(data) {
        // 数据处理，在对应节点展示
    }
    function error() {
        //  错误处理
    }
}
)();</code></pre>
<p><strong>最后本地预览，调整，完成后，部署到远程仓库</strong></p>
</li>
</ol>
</div></div></article></div><div id="gitalk"></div><script>var gitalk = new Gitalk({
    clientID: '921d6f0be7c36e212658',
    clientSecret: '2614ce5f405d03d99d9b76da0dc0a6f75b376bd9',
    id: '2018-10-29 23:26:45',
    repo: 'comments',
    owner: 'sanshiliuxiao',
    admin: 'sanshiliuxiao'
})
gitalk.render('gitalk')</script></div><div class="pjax-main-loading loading"><img class="loading-image" src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/loading.gif"></div></main><footer><div class="footer site-info"><p><i class="icon-copyright"></i><span>2018</span>&minus;<span>2020</span>&nbsp;<span>椎咲良田</span>&nbsp;<span><a href="https://github.com/sanshiliuxiao/hexo-theme-aurora.git" target="_blank">hexo-theme-Aurora</a></span></p></div></footer></div><div class="bg"><div class="pc-dynamic-bg"><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/1.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/2.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/3.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/4.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/5.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/6.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/7.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/8.jpg"></span><span class="image" data-image="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/theme/9.jpg"></span></div></div><span class="back-to-top"></span><div class="leancloud"><script src="/js/third-party/leancloud.min.js?version=2.0.0"></script><div class="leancloud-app-id" leancloud-app-id="QAIKomD08e9fmVRQP4tkzUDf-MdYXbMMI"></div><div class="leancloud-app-key" leancloud-app-key="vi0TViY0HvYocUR3HxKGd1l9"></div><div class="leancloud-app-hot"></div></div><link rel="stylesheet" href="/lib/APlayer/APlayer.min.css"><script src="/lib/APlayer/APlayer.min.js"></script><div id="aplayer"></div><script>let list = JSON.parse('[{"name":"Once more","artist":"阿保剛","url":"https://files.catbox.moe/13boxb.mp3","cover":"https://i.loli.net/2019/04/18/5cb87157c617e.jpg"},{"name":"All or None","artist":"阿保剛","url":"https://files.catbox.moe/4x69y9.mp3","cover":"https://i.loli.net/2019/04/18/5cb87157b537a.jpg"},{"name":"Karma","artist":"阿保剛","url":"https://files.catbox.moe/r5dsuh.mp3","cover":"https://i.loli.net/2019/04/18/5cb871583cfb7.jpg"},{"name":"星の奏でる歌","artist":"阿保剛","url":"https://files.catbox.moe/m1wd57.mp3","cover":"https://i.loli.net/2019/04/18/5cb871585123b.jpg"}]')
  const ap = new APlayer({
      container: document.getElementById('aplayer'),
      theme: '#b28fce',
      audio: list,
      fixed: true
  });
  ap.list.show()
</script><script src="/js/third-party/jquery.min.js?version=2.0.0"></script><script src="/js/third-party/isMobile.min.js?version=2.0.0"></script><script src="/js/third-party/timeago.min.js?version=2.0.0"></script><script src="/js/third-party/pjax.min.js?version=2.0.0"></script><script src="/js/third-party/zooming.min.js?version=2.0.0"></script><script src="/js/third-party/backstretch.min.js?version=2.0.0"></script><script src="/js/highlight.min.js?version=2.0.0"></script><script src="/js/index.js?version=2.0.0"></script></body></html>