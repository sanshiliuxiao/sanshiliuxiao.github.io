<!DOCTYPE html>
<html lang="ZH-CN">

<head>
  <meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="referrer" content="no-referrer">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1,user-scalable=no,viewport-fit=cover">
  <meta name="author" content="椎咲良田">
  <meta name="copyright" content="椎咲良田">
  <meta name="og:image" content="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/avatar.jpg">
  <meta name="og:type" content="website">
  <meta name="og:site_name" content="椎咲良田">
  <meta name="og:url" content="sanshiliuxiao.top">
  <meta name="og：title" content="椎咲良田">
  <meta name="theme-color" content="#b854d4">
  <title>椎咲良田</title>
  <link rel="canonical" href="//sanshiliuxiao.top">
  <script src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/js/third-party/jquery.min.js"></script>
  <script src="/js/third-party/leancloud.min.js?version=2.0.0"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
    }
    main {
      
      font-size: 24px;
      height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .xxx {
      text-align: center;
    }
    .yyy {
      text-align: center;
      display: flex;
      align-items: center;
    }
    .loading {
      width: 50px;
    }
    .loading img {
      max-width: 100%;
      object-fit: cover;
    }
    .bg 
    {
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      z-index: -1;
      background: url(https://i.loli.net/2019/12/06/7HmgsuQ2otvFSY3.jpg) #cfd0f8;
      background-size: cover;
      background-repeat: no-repeat;
    }
  .card {
    width: 600px;
    height: 600px;
    border-radius: 3px;
    background-color: rgba(255,255,255,0.65);
    box-shadow: 0 14px 38px rgba(0,0,0,0.08), 0 3px 8px rgba(0,0,0,0.06);
    transition: all 0.3s ease 0s, transform 0.6s cubic-bezier(0.6, 0.2, 0.1, 1) 0s;
    overflow: hidden;
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
  }
  </style>
</head>

<body>
  <main>
    
    <div class="bg"></div>
    <div class="card">
      <p class="xxx">
        <a href="https://sanshiliuxiao.gitee.io/">椎咲良田的个人博客</a>
      </p>
      <div class="yyy">
        <p>正在自动跳转，请稍后</p>
      </div>
      <div class="loading">
        <img src="https://cdn.jsdelivr.net/gh/sanshiliuxiao/blog-static/loading.gif">
      </div>
    </div>

  </main>
  <script>
    const ifExistNode = (selector) => $(selector).length !== 0
    // 访问者记录
    const appId = "QAIKomD08e9fmVRQP4tkzUDf-MdYXbMMI";
    const appKey = "vi0TViY0HvYocUR3HxKGd1l9";
    leancloud.init(appId, appKey);
    
  const leancloud = {
    init(appId, appKey) {
      if (window.AV) {
        AV.init(appId, appKey)
        const Visitor = AV.Object.extend("Visitor")
        this.addVistor(Visitor)
      }
    },
   
    addVistor(Visitor) {
      const referrer = this.getLocation(document.referrer);
      const hostname = referrer.hostname;
      const query = new AV.Query(Visitor);
      query.equalTo('referrer', hostname);
      query.find().then(results => {
        if (results.length > 0) {
          // 存在则增加访问次数
          const visitors = results[0];
          console.log(results)
          visitors.fetchWhenSave(true);
          visitors.increment("time");
          visitors.save()
        } else {
          // 不存在则新增来访者
          const newVisitor = new Visitor()
          /* Set ACL */
          const acl = new AV.ACL();
          acl.setPublicReadAccess(true);
          acl.setPublicWriteAccess(true);
          newVisitor.setACL(acl);
          newVisitor.set('referrer', hostname);
          newVisitor.set('time', 1);
          newVisitor.save().then(results => {
          })
        }
        query.equalTo('referrer', 'AllCount')
        query.find().then(results => {
          if (results.length === 1) {
            // 存在则增加访问次数
            const visitors = results[0];
            visitors.fetchWhenSave(true);
            visitors.increment("time");
            visitors.save()
    
          } else {
            // 不存在则新增来访者
            const newVisitor = new Visitor()
            const acl = new AV.ACL();
            acl.setPublicReadAccess(true);
            acl.setPublicWriteAccess(true);
            newVisitor.setACL(acl);
            newVisitor.set('referrer', 'AllCount');
            newVisitor.set('time', 1);
            newVisitor.save()
          }
        })
      })
    },
    getLocation(href) {
      // 转换访问来源地址
      const a = document.createElement('a');
      a.href = href;
      return a
    }
  }
  setTimeout(function() {
        document.location = 'https://sanshiliuxiao.gitee.io'
    }, 3000) 
  </script>
</body>

</html>
